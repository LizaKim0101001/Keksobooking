{"version":3,"file":"main.bundle.js","mappings":"mBACA,IAAIA,EAAsB,CCA1BA,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3EH,EAAwB,CAACS,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,kBCIlF,IAQII,EAAiB,SAASC,GAC5B,IAAIC,EAAaC,SAASC,cAAc,UAcxC,MAbe,WAAZH,IACDC,EAAWG,YAPL,KASO,SAAZJ,IACDC,EAAWG,YAZP,KAcU,UAAZJ,IACFC,EAAWG,YAdN,KAgBS,aAAZJ,IACFC,EAAWG,YAnBH,GAqBKH,EAAWG,aAKxBC,EAAeH,SAASC,cAAc,SAC1CE,EAAaC,iBAAiB,UAAU,KACtC,IAAIN,EAAUK,EAAaE,MAC3BR,EAAeC,MAKjB,MAAMQ,EAAaN,SAASC,cAAc,UAG1CK,EAAWF,iBAAiB,SAAS,KACnC,IAAIN,EAAUK,EAAaE,MAC3B,MAAME,EAAaD,EAAWD,MAE1BE,EANY,IAOdD,EAAWE,kBAAkB,4CACpBD,EAAaV,EAAeC,GACrCQ,EAAWE,kBAAkB,gDAAkDX,EAAeC,IAE9FQ,EAAWE,kBAAkB,IAE/BF,EAAWG,oBAKb,IAAIC,EAAgBV,SAASC,cAAc,WACvCU,EAAgBX,SAASC,cAAc,YAE3CS,EAAcN,iBAAiB,UAAU,KACvC,IAAIN,EAAUY,EAAcL,MAC5BM,EAAcN,MAAQP,KAExBa,EAAcP,iBAAiB,UAAU,KACvC,IAAIN,EAAUa,EAAcN,MAC5BK,EAAcL,MAAQP,KAIxB,MAGMc,EAAaZ,SAASC,cAAc,UAE1CW,EAAWR,iBAAiB,SAAS,KACnC,MAAMS,EAAcD,EAAWP,MAAMS,OAEjCD,EAPmB,GAQrBD,EAAWJ,kBAAkB,QARR,GAQqCK,GAAe,UAChEA,EAVY,IAWrBD,EAAWJ,kBAAkB,mBAAqBO,YAX7B,KAW8D,UAEnFH,EAAWJ,kBAAkB,IAE/BI,EAAWH,oBAKb,MAAMO,EAAahB,SAASC,cAAc,gBAEpCgB,EADiBjB,SAASC,cAAc,aACPiB,iBAAiB,UAGxDF,EAAWZ,iBAAiB,UAAU,KACpC,MAAMe,EAAYH,EAAWX,MAC7Be,QAAQC,IAAIF,GACI,GAAbA,GACDF,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,GACR,GAAbH,GACTF,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,GACR,GAAbH,GACTF,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,GACR,KAAbH,IACTF,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,EAC9BL,EAAgB,GAAGK,UAAW,MAKlC,MAAMC,EAAuB,SAAUC,EAAaC,EAAUC,GAC5D,MAAMC,EAAkB3B,SAASC,cAAcwB,GACzCG,EAAWD,EAAgBT,iBAAiBQ,GAElD,IAAK,IAAIG,EAAE,EAAGA,EAAGD,EAASd,OAAQe,IAChCD,EAASC,GAAGP,SAAWE,EAErBA,EACFG,EAAgBG,UAAUC,IAAI,qBAE9BJ,EAAgBG,UAAUE,OAAO,sBAKrCT,GAAqB,EAAM,WAAY,YACvCA,GAAqB,EAAM,gBAAiB,UAG5C,MAAMU,EAAajC,SAASC,cAAc,iBCzIpCiC,EAAMC,EAAED,IAAI,aACfE,GAAG,QAAQ,KACVb,GAAqB,EAAO,YAC5BH,QAAQC,IAAI,kBAEbgB,QAAQ,CACPC,IAAK,MACLC,IAAK,QACJ,IAELJ,EAAEK,UACA,qDACA,CACEC,YAAa,4FAEfC,MAAMR,GAGR,MAAMS,EAAcR,EAAES,KAAK,CACzBC,QAAS,mBACTC,SAAU,CAAC,GAAI,IACfC,WAAY,CAAC,GAAI,MAIbC,EAAgBb,EAAEc,OACtB,CAAEX,IAAK,SACLC,IAAK,WAEP,CACEW,WAAW,EACXN,KAAMD,IAIVK,EAAcN,MAAMR,GAYpB,MAAMiB,EAAcnD,SAASC,cAAc,iBACrCmD,EAAepD,SAASC,cAAc,kBACtCoD,EAAerD,SAASC,cAAc,kBACtCqD,EAAgBtD,SAASC,cAAc,mBAEvCsD,EADkBvD,SAASC,cAAc,qBACHiB,iBAAiB,kBAmBvDsC,EAAuBC,IAC3B,IAAIC,EAjBa,WACjB,IAAIA,EAAM,GAMV,OALAH,EAAoBI,SAASC,IACvBA,EAAKC,SACPH,EAAKI,KAAKF,EAAKvD,UAGZqD,EAUIK,GACPC,EAAO,EACPC,EAAQ,EA+DZ,MA7D2B,QAAvBb,EAAa/C,MACf2D,GAAQ,GAEmB,QAAvBZ,EAAa/C,OAAmBoD,EAAaS,MAAMC,MAAQ,MAC7DH,GAAQ,GAEiB,WAAvBZ,EAAa/C,OAAsBoD,EAAaS,MAAMC,OAAQ,KAASV,EAAaS,MAAMC,MAAQ,MACpGH,GAAQ,GAEiB,SAAvBZ,EAAa/C,OAAoBoD,EAAaS,MAAMC,OAAS,MAC/DH,GAAQ,KAGNP,EAAaS,MAAME,UAA4B,IAAhBV,EAAK5C,QAAiC,IAAhB4C,EAAK5C,OAC9DkD,GAAO,EAGFP,EAAaS,MAAME,SAGtBV,EAAKC,SAASC,IA9BC,IAAUS,EAAOhE,EAAPgE,EA+BNZ,EAAaS,MAAME,SA/BN/D,EA+BgBuD,EA9B7CS,EAAMC,MAAKC,GAAUlE,IAAUkE,MA+B9BN,GAAQ,GAENA,GAASP,EAAK5C,SAChBkD,GAAO,MAPXA,GAAQ,EAYc,QAAtBb,EAAY9C,OAAmB8C,EAAY9C,QAAUoD,EAAaS,MAAMM,OAC1ER,GAAQ,GAGiB,QAAvBX,EAAahD,OAAmBgD,EAAahD,OAASoD,EAAaS,MAAMO,MAC3ET,GAAQ,GAEmB,MAAvBX,EAAahD,OAAiBoD,EAAaS,MAAMO,OAAS,IAC5DT,GAAO,GAEkB,MAAvBX,EAAahD,OAAiBoD,EAAaS,MAAMO,OAAS,IAC5DT,GAAO,GAEkB,MAAvBX,EAAahD,OAAiBoD,EAAaS,MAAMO,OAAS,IAC5DT,GAAO,IAGiB,QAAxBV,EAAcjD,OAAmBiD,EAAcjD,OAASoD,EAAaS,MAAMQ,OAC7EV,GAAQ,GAEoB,MAAxBV,EAAcjD,OAAiBoD,EAAaS,MAAMQ,QAAS,IAC7DV,GAAQ,GAEkB,MAAxBV,EAAcjD,OAAiBoD,EAAaS,MAAMQ,QAAS,IAC7DV,GAAQ,GAEkB,MAAxBV,EAAcjD,OAAiBoD,EAAaS,MAAMQ,QAAS,IAC7DV,GAAQ,IAILA,GAIHW,EAAqB,CAACC,EAAeC,KACzC,MAAMC,EAAQtB,EAAoBoB,GAClCA,EAAoB,KAAIE,EACxB,MAAMC,EAAQvB,EAAoBqB,GAElC,OADAA,EAAoB,KAAIE,EACjBA,EAAQD,GAIXE,EAAY,SAAUC,GACJ9C,EAAEc,OACtB,CAAEX,IAAK,SACLC,IAAK,WAEP,CACEW,WAAW,EACXN,KAAMD,IAIID,MAAMR,GACpB,MAAMU,EAAOT,EAAES,KAAK,CAClBC,QAAQ,cACRC,SAAU,CAAC,GAAI,IACfC,WAAY,CAAC,GAAI,MAGnB,IAAImC,EAAWD,EAAKE,QAAQC,KAAKT,GACjCO,EAASvB,SAAQ,CAACC,EAAM/B,KAClB+B,EAAKI,KAAO,GACdkB,EAASG,OAAOxD,EAAIqD,EAASpE,OAAO,MAIxCoE,EACGC,MAAM,EAAGG,GACT3B,SAAQ,EAAE4B,SAAAA,GAAW1D,KAEPM,EAAEc,OACb,CACEX,IAAKiD,EAASjD,IACdC,IAAKgD,EAAShD,KAEhB,CACEK,KAAAA,IAKDF,MAAMR,GACNsD,UACCC,EAAY5D,EAAGqD,GACf,CACEQ,YAAY,QAOlBC,EAAa3F,SAASC,cAAc,YAC1C0F,EAAWtF,MAAQ,sBAGnB2C,EAAcZ,GAAG,WAAYwD,IAC3B,IAAIC,EAAczG,OAAO0G,OAAOF,EAAIG,OAAOC,aAC3CH,EAAY,GAAKA,EAAY,GAAGI,QAAQ,GACxCJ,EAAY,GAAKA,EAAY,GAAGI,QAAQ,GACxCN,EAAWtF,MAAQwF,KCrNrB,MAAMK,EAAc,SAAUC,GAC5B,MACMC,EADgBpG,SAASC,cAAc,UAAUoG,QAAQpG,cAAc,UAC1CqG,UAAU,QACvCC,EAAOvG,SAASC,cAAc,QACpCmG,EAAanG,cAAc,mBAAmBuG,YAAcL,EAC5DI,EAAKE,YAAYL,GACGA,EAAanG,cAAc,kBACnCG,iBAAiB,SAAS,KACpCgG,EAAapE,YAEfhC,SAASI,iBAAiB,WAAW,SAASwF,GACxB,KAAhBA,EAAIc,SACNN,EAAapE,aCab2E,EAAmB3G,SAASC,cAAc,YAEhD0G,EAAiBvG,iBAAiB,UAAWwF,IAC3CA,EAAIgB,iBACJ,MAAMC,EAAW,IAAIC,SAASlB,EAAIG,QAC5BgB,EAAU/G,SAASC,cAAc,iBACvC+G,MACE,mDACA,CACEC,OAAQ,OACRV,KAAMM,IAGPK,MAAMC,IACDA,EAASC,IACXL,EAAQM,QACRV,EAAiBU,QACjBrE,EAAcsE,UAAU,CACtBhF,IAAK,SACLC,IAAK,YAEPoD,EAAWtF,MAAQ,sBD5BL,SAAU8F,GAC9B,MACMoB,EADkBvH,SAASC,cAAc,YAAYoG,QAAQpG,cAAc,YAC1CqG,UAAU,QAC3CC,EAAOvG,SAASC,cAAc,QACpCsH,EAAetH,cAAc,qBAAqBuG,YCyB9B,2BDxBpBD,EAAKE,YAAYc,GACjBvH,SAASI,iBAAiB,SAAS,KACjCmH,EAAevF,YAEjBhC,SAASI,iBAAiB,WAAW,SAASwF,GACxB,KAAhBA,EAAIc,SACNa,EAAevF,YCkBbwF,IAEAtB,EAAY,qDAGfuB,OAAM,KACLvB,EAAY,wDCjDlB,MAAMT,EAAc,SAAU5D,EAAGoD,GAC/B,MACMyC,EADuB1H,SAASC,cAAc,SAASoG,QAAQpG,cAAc,UACzCqG,WAAU,GACpDoB,EAAazH,cAAc,kBAAkB0H,IAAM1C,EAAKpD,GAAG+F,OAAOC,OAClEH,EAAazH,cAAc,iBAAiBuG,YAAcvB,EAAKpD,GAAGqC,MAAM4D,MACxEJ,EAAazH,cAAc,uBAAuB8H,UAAY9C,EAAKpD,GAAGqC,MAAMC,MAAQ,sBACpFuD,EAAazH,cAAc,gBAAgBuG,YAAcvB,EAAKpD,GAAGqC,MAAMM,KACvEkD,EAAazH,cAAc,0BAA0BuG,YAAcvB,EAAKpD,GAAGqC,MAAMO,MAAdQ,cAAgDA,EAAKpD,GAAGqC,MAAMQ,OAA9DO,UACnEyC,EAAazH,cAAc,sBAAsBuG,YAAc,eAAgBvB,EAAKpD,GAAGqC,MAAM8D,QAAS,cAAgB/C,EAAKpD,GAAGqC,MAAM+D,SACpIP,EAAazH,cAAc,uBAAuBuG,YAAcvB,EAAKpD,GAAGqC,MAAMgE,YAC9E,IAAIC,EAAcT,EAAazH,cAAc,oBACxCgF,EAAKpD,GAAGqC,MAAME,UAGZa,EAAKpD,GAAGqC,MAAME,SAASgE,SAAS,SACnCD,EAAYlI,cAAc,yBAAyB+B,SAEhDiD,EAAKpD,GAAGqC,MAAME,SAASgE,SAAS,eACnCD,EAAYlI,cAAc,+BAA+B+B,SAEtDiD,EAAKpD,GAAGqC,MAAME,SAASgE,SAAS,YACnCD,EAAYlI,cAAc,4BAA4B+B,SAEnDiD,EAAKpD,GAAGqC,MAAME,SAASgE,SAAS,WACnCD,EAAYlI,cAAc,2BAA2B+B,SAElDiD,EAAKpD,GAAGqC,MAAME,SAASgE,SAAS,aACnCD,EAAYlI,cAAc,6BAA6B+B,SAEpDiD,EAAKpD,GAAGqC,MAAME,SAASgE,SAAS,gBACnCD,EAAYlI,cAAc,gCAAgC+B,UAlB5DmG,EAAYnG,SAqBd,MAAMqG,EAAaX,EAAazH,cAAc,kBACxCqI,EAAaZ,EAAazH,cAAc,iBAY9C,OAXKgF,EAAKpD,GAAGqC,MAAMqE,QAGjBD,EAAWtG,SACXiD,EAAKpD,GAAGqC,MAAMqE,OAAO5E,SAASC,IAC5B,MAAM4E,EAAkBF,EAAWhC,WAAU,GAC7CkC,EAAgBb,IAAM/D,EACtByE,EAAW5B,YAAY+B,OANzBH,EAAWrG,SAUN0F,GCrCHpC,EAA6B,GFRnB,IAACmD,EAAWC,GAAXD,EEWdxD,ILsImB,IAAC0D,EKrInBpH,GAAqB,EAAO,WAAY,YACxCA,GAAqB,EAAO,gBAAiB,UAG7CyD,EAAUC,GLiIS0D,EKhIL,IAAM3D,EAAUC,GLiIhChD,EAAW7B,iBAAiB,UAAU,KANxBJ,SAASC,cAAc,wBAC7B8H,UAAU,GAOhBY,QGpJwBD,EEmBzBE,IACC1C,EAAY,mEFpBwB,IAC/Bc,MAAM,yDACVE,MAAMC,IACL,GAAIA,EAASC,GAEX,OADA7F,GAAqB,EAAO,gBAAiB,UACtC4F,EAAS0B,UAGnB3B,MAAM2B,IACLzH,QAAQC,IAAI,UACZoH,EAAUI,MAEXpB,OAAOmB,IACNF,W","sources":["webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/webpack/runtime/define property getters","webpack://keksobooking/webpack/runtime/hasOwnProperty shorthand","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/modal.js","webpack://keksobooking/./source/js/database-json.js","webpack://keksobooking/./source/js/card.js","webpack://keksobooking/./source/js/main.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import {mapCreate} from './map.js'\nimport {SIMILAR_ANNOUNCEMENT_COUNT} from './main.js'\n\n//  объект с мин ценами на жильей, которые соответсвуют выбору типа жильй\nlet pricePerNight = {\n  bungalow: 0,\n  flat: 1000,\n  house: 5000,\n  palace: 10000,\n}\n\n// функция для получения минимальной цены и выставление ее в placegolder\nlet searchMinPrice = function(variant){\n  let inputPrice = document.querySelector('#price');\n  if(variant === 'palace'){\n    inputPrice.placeholder = pricePerNight.palace\n  }\n  if(variant === 'flat') {\n    inputPrice.placeholder = pricePerNight.flat\n  }\n  if (variant === 'house'){\n    inputPrice.placeholder = pricePerNight.house\n  }\n  if (variant === 'bungalow'){\n    inputPrice.placeholder = pricePerNight.bungalow\n  }\n  let minPrice = inputPrice.placeholder;\n  return minPrice\n}\n\n// функция для получения данных из селекта (тип жилья) и выставление минимальной цены в зависимости от выбора пользователя типа жилья\nlet typeOfSelect = document.querySelector('#type');\ntypeOfSelect.addEventListener('change', () => {\n  let variant = typeOfSelect.value;\n  searchMinPrice(variant)\n})\n\n\n// валидация формы для price\nconst priceInput = document.querySelector('#price')\nconst MAX_PRICE = 1000000\n\npriceInput.addEventListener('input', () => {\n  let variant = typeOfSelect.value\n  const priceValue = priceInput.value\n\n  if (priceValue > MAX_PRICE) {\n    priceInput.setCustomValidity('Цена за жилье не может превышать ' + MAX_PRICE)\n  } else if (priceValue < searchMinPrice(variant)) {\n    priceInput.setCustomValidity('Цена за данный вид жилья не может быть менее ' + searchMinPrice(variant))\n  } else {\n    priceInput.setCustomValidity('')\n  }\n  priceInput.reportValidity();\n})\n\n\n// функция делающая время въезда и выезда одинаковым при изменении одного или другого селекта\nlet timeOfCheckin = document.querySelector('#timein');\nlet timeOfChekout = document.querySelector('#timeout')\n\ntimeOfCheckin.addEventListener('change', () => {\n  let variant = timeOfCheckin.value;\n  timeOfChekout.value = variant;\n})\ntimeOfChekout.addEventListener('change', () => {\n  let variant = timeOfChekout.value;\n  timeOfCheckin.value = variant;\n})\n\n// валидация формы для title\nconst MAX_TITLE_LENGHT = 100;\nconst MIN_TITLE_LENGHT = 30;\n\nconst titleInput = document.querySelector('#title');\n\ntitleInput.addEventListener('input', () => {\n  const valueLenght = titleInput.value.length;\n\n  if (valueLenght < MIN_TITLE_LENGHT) {\n    titleInput.setCustomValidity('Ещё ' + (MIN_TITLE_LENGHT - valueLenght) + ' симв.');\n  } else if (valueLenght > MAX_TITLE_LENGHT) {\n    titleInput.setCustomValidity('Удалите лишние ' + (valueLength - MAX_TITLE_LENGHT) +' симв.')\n  } else {\n    titleInput.setCustomValidity('')\n  }\n  titleInput.reportValidity();\n})\n\n\n// функция валидации select для форм количество комнат и гостей. Поля должны быть синхронизированны\nconst roomSelect = document.querySelector('#room_number')\nconst capacitySelect = document.querySelector('#capacity')\nconst capacityOptions = capacitySelect.querySelectorAll('option')\n\n\nroomSelect.addEventListener('change', () => {\n  const roomValue = roomSelect.value\n  console.log(roomValue);\n  if(roomValue == 1){\n    capacityOptions[0].disabled = true;\n    capacityOptions[1].disabled = true;\n    capacityOptions[3].disabled = true;\n    capacityOptions[2].disabled = false\n  } else if (roomValue == 2) {\n    capacityOptions[0].disabled = true;\n    capacityOptions[3].disabled = true;\n    capacityOptions[1].disabled = false;\n    capacityOptions[2].disabled = false;\n  } else if (roomValue == 3) {\n    capacityOptions[3].disabled = true;\n    capacityOptions[0].disabled = false;\n    capacityOptions[1].disabled = false;\n    capacityOptions[2].disabled = false;\n  } else if (roomValue == 100) {\n    capacityOptions[0].disabled = true;\n    capacityOptions[1].disabled = true;\n    capacityOptions[2].disabled = true;\n    capacityOptions[3].disabled = false;\n  }\n})\n\n//  функция для отключения и включения форм\nconst activeDisactiveInput = function (trueOrFalse, formName, inputType) {\n  const formForDisabled = document.querySelector(formName);\n  const allInput = formForDisabled.querySelectorAll(inputType);\n\n  for (let i=0; i< allInput.length; i++){\n    allInput[i].disabled = trueOrFalse;\n  }\n  if (trueOrFalse) {\n    formForDisabled.classList.add('ad-form--disabled')\n  } else {\n    formForDisabled.classList.remove('ad-form--disabled')\n  }\n}\n\n// использование функции. отключаем до загрузки карты\nactiveDisactiveInput(true, '.ad-form', 'fieldset');\nactiveDisactiveInput(true, '.map__filters', 'select')\n\n// при изменении формы получаем значения полей\nconst mapFilters = document.querySelector('.map__filters')\n\n// функция для очистки меток\nlet clean = function(){\n  let markers = document.querySelector('.leaflet-marker-pane');\n  markers.innerHTML='';\n}\n\n//функция слушатель событий. при изменении поля фильтрации очищается карта от меток и далее происзодит рангирование и отрисовка новых меток\nconst changeMapForm = (cb) => {\n  mapFilters.addEventListener('change', ()=> {\n    clean();\n    cb()\n  })\n}\n\n\n\nexport {activeDisactiveInput, mapFilters, changeMapForm}\n","//import {offerItem} from './data.js';\nimport {createPopup} from './card.js';\nimport {activeDisactiveInput} from './form.js'\nimport {SIMILAR_ANNOUNCEMENT_COUNT} from './main.js'\n\nconst map = L.map('mapCanvas')\n  .on('load', () => {\n    activeDisactiveInput(false, '.ad-form')\n    console.log('загрузилось');\n  })\n  .setView({\n    lat: 35.6700 ,\n    lng: 139.7500,\n  }, 10);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(map);\n\n\nconst mainPinIcon = L.icon({\n  iconUrl: 'img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\n\nconst mainPinMarker = L.marker(\n  { lat: 35.67842,\n    lng: 139.76102,\n  },\n  {\n    draggable: true,\n    icon: mainPinIcon,\n  },\n);\n\nmainPinMarker.addTo(map);\n\n/*\nнужно настроить фильтрацию объявлений\n-при изменении параметров в фильтрах нужно удалять старые метки и добавялять новые отфильтрованные\n\nработа фильтров\n- рангировать исходные данные (чем больше совпадений с данныит из фильтров, тем выше ранг). максимальное значение ранга = 5\n- выдавать не больше 10 меток\n\n*/\n// инпуты отвечающие за фильтрацию\nconst housingType = document.querySelector('#housing-type') // по типу жилья\nconst housingPrice = document.querySelector('#housing-price') // по цене\nconst housingRooms = document.querySelector('#housing-rooms') //по кол-ву комнат\nconst housingGuests = document.querySelector('#housing-guests') //по кол-ву гостей\nconst housingFeatures = document.querySelector('#housing-features') // особбености\nconst housingFeaturesItem = housingFeatures.querySelectorAll('.map__checkbox') // для получения value checkbox:checked\n\n// функция для создания массива из значений checkbox:checked\nconst returnList = function (){\n  let list =[];\n  housingFeaturesItem.forEach((item) => {\n    if (item.checked) {\n      list.push(item.value)\n    }\n  });\n  return list\n}\n\n// функция для проверки наличия переменной в массиве (фильтр features)\nconst checkFeature = function (array, value) {\n  return array.some(arrVal => value === arrVal)\n}\n\n// функция для подсчета и присвоения ранга\nconst getAnnouncementRank = (announcement) => {\n  let list = returnList()\n  let rank = 0;\n  let count = 0;\n\n  if (housingPrice.value === 'any') {\n    rank += 2;\n  } else {\n    if (housingPrice.value === 'low' && announcement.offer.price < 10000) {\n      rank += 2;\n    }\n    if (housingPrice.value === 'middle' && announcement.offer.price >=10000 && announcement.offer.price < 50000) {\n      rank += 2;\n    }\n    if (housingPrice.value === 'high' && announcement.offer.price >= 50000){\n      rank += 2;\n    }\n  }\n  if ((!announcement.offer.features && list.length === 0) || list.length === 0) {\n    rank +=1\n  }\n  else {\n    if (!announcement.offer.features) {\n      rank += 0\n    } else {\n      list.forEach((item) => {\n        if (checkFeature(announcement.offer.features, item)) {\n          count +=1\n        }\n        if (count == list.length ) {\n          rank +=1\n        }\n      });\n    }\n  }\n  if (housingType.value === 'any' || housingType.value === announcement.offer.type){\n    rank += 1;\n  }\n\n  if (housingRooms.value === 'any' || housingRooms.value == announcement.offer.rooms) {\n    rank += 1;\n  } else {\n    if (housingRooms.value === '1' && announcement.offer.rooms >= 1) {\n      rank +=1;\n    }\n    if (housingRooms.value === '2' && announcement.offer.rooms >= 2) {\n      rank +=1;\n    }\n    if (housingRooms.value === '3' && announcement.offer.rooms >= 3) {\n      rank +=1;\n    }\n  }\n  if (housingGuests.value === 'any' || housingGuests.value == announcement.offer.guests ) {\n    rank += 1;\n  } else {\n    if (housingGuests.value === '2' && announcement.offer.guests >=2) {\n      rank += 1;\n    }\n    if (housingGuests.value === '1' && announcement.offer.guests >=1) {\n      rank += 1;\n    }\n    if (housingGuests.value === '0' && announcement.offer.guests >=0) {\n      rank += 1;\n    }\n  }\n// для лучшей работы сортировки ранг уменьшается на 1 единицу\n  return rank\n}\n\n// функция сортировки\nconst compareAnouncement = (announcementA, announcementB) => {\n  const rankA = getAnnouncementRank(announcementA)\n  announcementA['rank'] = rankA\n  const rankB = getAnnouncementRank(announcementB)\n  announcementB['rank'] = rankB\n  return rankB - rankA;\n}\n\n// функция для создания меток на карте\nconst mapCreate = function (data) {\n  const mainPinMarker = L.marker(\n    { lat: 35.67842,\n      lng: 139.76102,\n    },\n    {\n      draggable: true,\n      icon: mainPinIcon,\n    },\n  );\n\n  mainPinMarker.addTo(map);\n  const icon = L.icon({\n    iconUrl:'img/pin.svg',\n    iconSize: [40, 40],\n    iconAnchor: [20, 40],\n  });\n\n  let sortData = data.slice().sort(compareAnouncement);\n  sortData.forEach((item, i) => {\n    if (item.rank < 6) {\n      sortData.splice(i, (sortData.length-1))\n    }\n  });\n\n  sortData\n    .slice(0, SIMILAR_ANNOUNCEMENT_COUNT)\n    .forEach(({location}, i) => {\n\n      let marker = L.marker(\n        {\n          lat: location.lat,\n          lng: location.lng,\n        },\n        {\n          icon,\n        },\n      );\n\n      marker\n        .addTo(map)\n        .bindPopup(\n          createPopup(i, sortData),\n          {\n            keepInView: true,\n          },\n        )\n    });\n}\n\n// заполнение input с адресом\nconst inputAdres = document.querySelector('#address');\ninputAdres.value = '35.67842, 139.76102'\n\n//dragstart\nmainPinMarker.on('moveend', (evt) => {\n  let coordinates = Object.values(evt.target.getLatLng());\n  coordinates[0] = coordinates[0].toFixed(5)\n  coordinates[1] = coordinates[1].toFixed(5)\n  inputAdres.value = coordinates;\n});\n\nexport {mapCreate, inputAdres, mainPinMarker}\n","// функция для создания ошибки при работе\nconst createError = function (text) {\n  const errorTemplate = document.querySelector('#error').content.querySelector('.error')\n  const errorElement = errorTemplate.cloneNode('true')\n  const body = document.querySelector('body');\n  errorElement.querySelector('.error__message').textContent = text;\n  body.appendChild(errorElement)\n  const errorButton = errorElement.querySelector('.error__button');\n  errorButton.addEventListener('click', ()=> {\n    errorElement.remove()\n  })\n  document.addEventListener('keydown', function(evt){\n    if (evt.keyCode === 27) {\n      errorElement.remove()\n    }\n  })\n}\n\n// функция при удачной отправки данных на сервер\nconst createSuccess = function (text) {\n  const successTemplate = document.querySelector('#success').content.querySelector('.success')\n  const successElement = successTemplate.cloneNode('true')\n  const body = document.querySelector('body');\n  successElement.querySelector('.success__message').textContent = text;\n  body.appendChild(successElement)\n  document.addEventListener('click', ()=> {\n    successElement.remove()\n  })\n  document.addEventListener('keydown', function(evt){\n    if (evt.keyCode === 27) {\n      successElement.remove()\n    }\n  })\n}\n\n\nexport {createError, createSuccess}\n","import {createPopup} from './card.js';\nimport {mapCreate, inputAdres, mainPinMarker} from './map.js';\nimport {createError, createSuccess} from './modal.js'\nimport {activeDisactiveInput} from './form.js'\n\n\nconst getData = (onSuccess, onError) => () => {\n  return fetch('https://23.javascript.pages.academy/keksobooking/data')\n    .then((response) => {\n      if (response.ok) {\n        activeDisactiveInput(false, '.map__filters', 'select')\n        return response.json()\n      }\n    })\n    .then((json) => {\n      console.log('reload');\n      onSuccess(json)\n    })\n    .catch((err) => {\n      onError(err);\n    })\n}\n\n\n// функция для оправки формы через фетч\n\nconst announcementForm = document.querySelector('.ad-form')\n\nannouncementForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  const formData = new FormData(evt.target);\n  const formMap = document.querySelector('.map__filters')\n  fetch(\n    'https://23.javascript.pages.academy/keksobooking',\n    {\n      method: 'POST',\n      body: formData,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        formMap.reset()\n        announcementForm.reset()\n        mainPinMarker.setLatLng({\n          lat: 35.67842,\n          lng: 139.76102,\n        })\n        inputAdres.value = '35.67842, 139.76102'\n        createSuccess('Форма успешно отправлена');\n      } else {\n        createError('Не удалось отправить форму. Попробуйте ещё раз');\n      }\n    })\n    .catch(() => {\n      createError('Не удалось отправить форму. Попробуйте ещё раз');\n    });\n})\n\nexport {getData}\n","//import './data.js';\n//import {offerItem} from './data.js';\nimport './database-json.js'\n\n// функция для отрисовки popup для каждой метки\nconst createPopup = function (i, data) {\n  const similarOfferTemplate = document.querySelector('#card').content.querySelector('.popup');\n  const offerElement = similarOfferTemplate.cloneNode(true);\n  offerElement.querySelector('.popup__avatar').src = data[i].author.avatar;\n  offerElement.querySelector('.popup__title').textContent = data[i].offer.title;\n  offerElement.querySelector('.popup__text--price').innerHTML = data[i].offer.price + '<span>₽/ночь</span>';\n  offerElement.querySelector('.popup__type').textContent = data[i].offer.type;\n  offerElement.querySelector('.popup__text--capacity').textContent = data[i].offer.rooms + ' ' + 'комнат(ы)' + ' ' + data[i].offer.guests + ' ' + 'гостей';\n  offerElement.querySelector('.popup__text--time').textContent = 'Заезд после ' +data[i].offer.checkin +', выезд до ' + data[i].offer.checkout;\n  offerElement.querySelector('.popup__description').textContent = data[i].offer.description;\n  let featureList = offerElement.querySelector('.popup__features')\n  if (!data[i].offer.features){\n    featureList.remove()\n  } else {\n    if (!data[i].offer.features.includes('wifi')){\n      featureList.querySelector('.popup__feature--wifi').remove();\n    }\n    if (!data[i].offer.features.includes('dishwasher')){\n      featureList.querySelector('.popup__feature--dishwasher').remove();\n    }\n    if (!data[i].offer.features.includes('parking')){\n      featureList.querySelector('.popup__feature--parking').remove();\n    }\n    if (!data[i].offer.features.includes('washer')){\n      featureList.querySelector('.popup__feature--washer').remove();\n    }\n    if (!data[i].offer.features.includes('elevator')){\n      featureList.querySelector('.popup__feature--elevator').remove();\n    }\n    if (!data[i].offer.features.includes('conditioner')){\n      featureList.querySelector('.popup__feature--conditioner').remove();\n    }\n  }\n  const photosList = offerElement.querySelector('.popup__photos');\n  const popupPhoto = offerElement.querySelector('.popup__photo');\n  if (!data[i].offer.photos){\n    photosList.remove()\n  } else {\n    popupPhoto.remove()\n    data[i].offer.photos.forEach((item) => {\n      const popupPhotoClone = popupPhoto.cloneNode(true);\n      popupPhotoClone.src = item;\n      photosList.appendChild(popupPhotoClone);\n    });\n\n  }\n  return offerElement;\n};\n\nexport { createPopup};\n","'use strict'\nimport './card.js';\nimport './form.js';\n//import './data.js'\nimport './map.js'\nimport './try.js'\nimport './database-json.js'\nimport './modal.js'\nimport {getData} from './database-json.js'\nimport {createError} from './modal.js'\nimport {mapCreate} from './map.js'\nimport { activeDisactiveInput, changeMapForm} from './form.js'\n\n\nconst SIMILAR_ANNOUNCEMENT_COUNT = 10\n\nconst fetchData = getData(\n  (data) => {\n    activeDisactiveInput(false, '.ad-form', 'fieldset');\n    activeDisactiveInput(false, '.map__filters', 'select')\n\n\n    mapCreate(data);\n    changeMapForm(() => mapCreate(data));\n  },\n  (err) => {\n    createError('Ошибка работы сервера. Объявления не будут отображены на карте')\n  })\n\nfetchData()\n\nexport {SIMILAR_ANNOUNCEMENT_COUNT}\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","searchMinPrice","variant","inputPrice","document","querySelector","placeholder","typeOfSelect","addEventListener","value","priceInput","priceValue","setCustomValidity","reportValidity","timeOfCheckin","timeOfChekout","titleInput","valueLenght","length","valueLength","roomSelect","capacityOptions","querySelectorAll","roomValue","console","log","disabled","activeDisactiveInput","trueOrFalse","formName","inputType","formForDisabled","allInput","i","classList","add","remove","mapFilters","map","L","on","setView","lat","lng","tileLayer","attribution","addTo","mainPinIcon","icon","iconUrl","iconSize","iconAnchor","mainPinMarker","marker","draggable","housingType","housingPrice","housingRooms","housingGuests","housingFeaturesItem","getAnnouncementRank","announcement","list","forEach","item","checked","push","returnList","rank","count","offer","price","features","array","some","arrVal","type","rooms","guests","compareAnouncement","announcementA","announcementB","rankA","rankB","mapCreate","data","sortData","slice","sort","splice","SIMILAR_ANNOUNCEMENT_COUNT","location","bindPopup","createPopup","keepInView","inputAdres","evt","coordinates","values","target","getLatLng","toFixed","createError","text","errorElement","content","cloneNode","body","textContent","appendChild","keyCode","announcementForm","preventDefault","formData","FormData","formMap","fetch","method","then","response","ok","reset","setLatLng","successElement","createSuccess","catch","offerElement","src","author","avatar","title","innerHTML","checkin","checkout","description","featureList","includes","photosList","popupPhoto","photos","popupPhotoClone","onSuccess","onError","cb","err","json"],"sourceRoot":""}